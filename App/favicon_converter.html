<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image to Favicon Converter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .checkerboard {
            background-color: #ffffff;
            background-image: linear-gradient(45deg, #f0f0f0 25%, transparent 25%),
                linear-gradient(-45deg, #f0f0f0 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #f0f0f0 75%),
                linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col">

    <nav class="bg-white border-b border-gray-200">
        <div class="container mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <span class="text-2xl">üñºÔ∏è</span>
                <h1 class="text-xl font-bold text-gray-900">Favicon Converter</h1>
            </div>
           
        </div>
    </nav>

    <main class="container mx-auto px-4 py-10 flex-grow max-w-5xl">
        
        <div class="text-center mb-10">
            <h2 class="text-3xl font-bold text-gray-900 mb-3">PNG/JPG to Favicon</h2>
            <p class="text-gray-500">Upload an image and we'll generate all the icon sizes you need.</p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            
            <div class="lg:col-span-2">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8 h-full flex flex-col">
                    <h3 class="text-lg font-bold text-gray-700 mb-4">1. Upload Image</h3>
                    
                    <div id="drop-zone" class="flex-grow border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 flex flex-col items-center justify-center p-10 cursor-pointer transition-colors hover:bg-indigo-50 hover:border-indigo-300 group">
                        <input type="file" id="file-input" accept="image/*" class="hidden">
                        <div class="w-16 h-16 bg-white rounded-full shadow-sm flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                            <svg class="w-8 h-8 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                        </div>
                        <p class="text-lg font-medium text-gray-700">Drag and drop your image</p>
                        <p class="text-sm text-gray-500 mt-2">Supports JPG, PNG, BMP</p>
                    </div>
                </div>
            </div>

            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 sticky top-6">
                    <h3 class="text-lg font-bold text-gray-700 mb-4">2. Preview & Download</h3>
                    
                    <div class="checkerboard rounded-lg border border-gray-200 p-8 flex items-center justify-center mb-6 min-h-[200px]">
                        <img id="preview-img" class="max-w-[128px] max-h-[128px] shadow-lg rounded hidden" alt="Preview">
                        <span id="placeholder-text" class="text-gray-400 text-sm italic">No image selected</span>
                    </div>

                    <button id="download-btn" disabled class="w-full bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded-lg shadow-sm transition-all flex justify-center items-center gap-2">
                        <span>Download Favicons</span>
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                    </button>
                    
                    <p class="text-xs text-gray-400 mt-4 text-center">Generates .ico, .png (16, 32, 192, 512), and site.webmanifest</p>
                </div>
            </div>
        </div>

        <div class="mt-12 bg-white rounded-xl shadow-sm border border-gray-200 p-8">
            <h3 class="text-xl font-bold text-gray-900 mb-4">Installation</h3>
            <p class="text-gray-600 mb-4">1. Unzip the downloaded file and upload the images to the root of your website.</p>
            <p class="text-gray-600 mb-2">2. Paste this code into the <code class="text-pink-600 bg-gray-100 px-1 rounded">&lt;head&gt;</code> of your HTML:</p>
            
            <div class="relative group">
                <div class="absolute right-2 top-2">
                    <button onclick="copyCode()" class="bg-gray-700 hover:bg-gray-600 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity">Copy</button>
                </div>
                <pre id="code-block" class="bg-gray-900 text-gray-300 p-4 rounded-lg overflow-x-auto text-sm font-mono">&lt;link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"&gt;
&lt;link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"&gt;
&lt;link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"&gt;
&lt;link rel="manifest" href="/site.webmanifest"&gt;</pre>
            </div>
        </div>

    </main>

    <footer class="bg-white border-t border-gray-200 mt-auto py-8">
        <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
            &copy; 
        Tools Built by <a href="https://fani-kiran.github.io/">hellofani</a>
        </div>
    </footer>

    <script>
        const dropZone = document.getElementById('drop-zone');
        const fileInput = document.getElementById('file-input');
        const previewImg = document.getElementById('preview-img');
        const placeholderText = document.getElementById('placeholder-text');
        const downloadBtn = document.getElementById('download-btn');
        
        let loadedImage = null; // Stores the Image object

        // --- Drag & Drop Events ---
        dropZone.addEventListener('click', () => fileInput.click());

        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.classList.add('border-indigo-500', 'bg-indigo-50');
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.classList.remove('border-indigo-500', 'bg-indigo-50');
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.classList.remove('border-indigo-500', 'bg-indigo-50');
            const files = e.dataTransfer.files;
            if (files.length) handleFile(files[0]);
        });

        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length) handleFile(e.target.files[0]);
        });

        // --- File Processing ---
        function handleFile(file) {
            if (!file.type.startsWith('image/')) {
                alert('Please upload a valid image file.');
                return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
                const img = new Image();
                img.onload = () => {
                    loadedImage = img;
                    previewImg.src = img.src;
                    previewImg.classList.remove('hidden');
                    placeholderText.classList.add('hidden');
                    downloadBtn.disabled = false;
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        // --- Image Resizing Helper ---
        function resizeImage(img, width, height) {
            return new Promise((resolve) => {
                const canvas = document.createElement('canvas');
                canvas.width = width;
                canvas.height = height;
                const ctx = canvas.getContext('2d');
                
                // High quality scaling
                ctx.imageSmoothingEnabled = true;
                ctx.imageSmoothingQuality = 'high';
                
                ctx.drawImage(img, 0, 0, width, height);
                
                canvas.toBlob((blob) => {
                    resolve(blob);
                }, 'image/png');
            });
        }

        // --- Download Handler ---
        downloadBtn.addEventListener('click', async () => {
            if (!loadedImage) return;

            const btnOriginalText = downloadBtn.innerHTML;
            downloadBtn.innerHTML = 'Generating...';
            downloadBtn.disabled = true;

            const zip = new JSZip();

            // 1. Generate PNGs
            const sizes = [
                { name: 'favicon-16x16.png', w: 16, h: 16 },
                { name: 'favicon-32x32.png', w: 32, h: 32 },
                { name: 'apple-touch-icon.png', w: 180, h: 180 },
                { name: 'android-chrome-192x192.png', w: 192, h: 192 },
                { name: 'android-chrome-512x512.png', w: 512, h: 512 }
            ];

            // We also need a 32x32 for the .ico
            // Note: Modern browsers handle PNG inside .ico fine, or just renaming the file.
            // For simplicity and client-side speed, we will use the 32x32 png blob as the ico content.
            let icoBlob = null;

            for (const size of sizes) {
                const blob = await resizeImage(loadedImage, size.w, size.h);
                zip.file(size.name, blob);
                if (size.w === 32) icoBlob = blob;
            }

            // 2. Add favicon.ico (using the 32x32 PNG data)
            zip.file('favicon.ico', icoBlob);

            // 3. Generate site.webmanifest
            const manifest = {
                "name": "",
                "short_name": "",
                "icons": [
                    { "src": "/android-chrome-192x192.png", "sizes": "192x192", "type": "image/png" },
                    { "src": "/android-chrome-512x512.png", "sizes": "512x512", "type": "image/png" }
                ],
                "theme_color": "#ffffff",
                "background_color": "#ffffff",
                "display": "standalone"
            };
            zip.file('site.webmanifest', JSON.stringify(manifest, null, 2));

            // 4. Download Zip
            zip.generateAsync({ type: "blob" }).then((content) => {
                saveAs(content, "favicon_package.zip");
                downloadBtn.innerHTML = btnOriginalText;
                downloadBtn.disabled = false;
            });
        });

        // --- Copy Code Helper ---
        function copyCode() {
            const code = document.getElementById('code-block').innerText;
            navigator.clipboard.writeText(code);
            alert('Code copied to clipboard!');
        }
    </script>
</body>
</html>